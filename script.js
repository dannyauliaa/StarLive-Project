const translations = {
    id: {
        siteTitle: 'Japanese Nature',
        settingsTitle: 'Pengaturan',
        seasonSelection: 'Pilih Musim',
        spring: 'Spring',
        summer: 'Summer',
        autumn: 'Autumn',
        winter: 'Winter',
        animationToggle: 'Animasi Partikel',
        animationStatus: 'Aktif',
        languageSelection: 'Pilih Bahasa',
        welcomeTitle: 'Selamat Datang di Japanese Nature',
        welcomeSubtitle: 'å››å­£ã®ç¾Žã—ã• - Keindahan Empat Musim',
        welcomePara1: 'Jepang dikenal dengan keindahan alamnya yang berganti mengikuti empat musim. Setiap musim membawa keunikan dan pesona tersendiri, dari sakura yang mekar di musim semi hingga salju yang turun lembut di musim dingin.',
        welcomePara2: 'Website ini menghadirkan pengalaman visual yang memukau, dimana Anda dapat merasakan atmosfer setiap musim di Jepang. Nikmati ketenangan dan keharmonisan alam Jepang yang legendaris melalui tampilan interaktif kami.',
        welcomePara3: 'Pilih musim favorit Anda di bagian atas dan rasakan bagaimana alam berubah dengan indahnya. Setiap musim memiliki karakteristik unik yang mencerminkan filosofi Jepang tentang keseimbangan dan keindahan alami.',
        periodLabel: 'ðŸ—“ï¸ Periode',
        characteristicsLabel: 'ðŸŒ¡ï¸ Karakteristik',
        traditionsLabel: 'ðŸŽŽ Tradisi',
        feature1Title: 'Pengalaman Visual',
        feature1Desc: 'Nikmati efek visual yang memukau dengan partikel-partikel yang jatuh sesuai musim yang dipilih, menciptakan suasana autentik Jepang.',
        feature2Title: 'Desain Minimalis',
        feature2Desc: 'Terinspirasi dari filosofi wabi-sabi Jepang, desain kami mengedepankan kesederhanaan dan keindahan alami.',
        feature3Title: 'Real-time Update',
        feature3Desc: 'Waktu dan tanggal ditampilkan secara real-time, mengingatkan kita akan perjalanan waktu dan perubahan musim.',
        footerAboutTitle: 'Tentang Kami',
        footerAboutText: 'Japanese Nature adalah platform yang didedikasikan untuk membawa keindahan empat musim Jepang ke dalam pengalaman digital yang immersive.',
        footerNavTitle: 'Navigasi',
        footerContactTitle: 'Kontak',
        navHome: 'Home',
        navAbout: 'About',
        navGallery: 'Gallery',
        navContact: 'Contact',
        privacyPolicy: 'Privacy Policy',
        termsOfService: 'Terms of Service',
        menuTitle: 'Menu Navigasi',
        menuSeasons: 'Seasons'
    },
    en: {
        siteTitle: 'Japanese Nature',
        settingsTitle: 'Settings',
        seasonSelection: 'Select Season',
        spring: 'Spring',
        summer: 'Summer',
        autumn: 'Autumn',
        winter: 'Winter',
        animationToggle: 'Particle Animation',
        animationStatus: 'Active',
        languageSelection: 'Select Language',
        welcomeTitle: 'Welcome to Japanese Nature',
        welcomeSubtitle: 'å››å­£ã®ç¾Žã—ã• - The Beauty of Four Seasons',
        welcomePara1: 'Japan is known for its natural beauty that changes with the four seasons. Each season brings unique charm, from blooming cherry blossoms in spring to gently falling snow in winter.',
        welcomePara2: 'This website presents a stunning visual experience where you can feel the atmosphere of each season in Japan. Enjoy the legendary tranquility and harmony of Japanese nature through our interactive display.',
        welcomePara3: 'Choose your favorite season at the top and feel how nature changes beautifully. Each season has unique characteristics that reflect Japanese philosophy of balance and natural beauty.',
        periodLabel: 'ðŸ—“ï¸ Period',
        characteristicsLabel: 'ðŸŒ¡ï¸ Characteristics',
        traditionsLabel: 'ðŸŽŽ Traditions',
        feature1Title: 'Visual Experience',
        feature1Desc: 'Enjoy stunning visual effects with falling particles according to the selected season, creating an authentic Japanese atmosphere.',
        feature2Title: 'Minimalist Design',
        feature2Desc: 'Inspired by Japanese wabi-sabi philosophy, our design emphasizes simplicity and natural beauty.',
        feature3Title: 'Real-time Update',
        feature3Desc: 'Time and date are displayed in real-time, reminding us of the journey of time and changing seasons.',
        footerAboutTitle: 'About Us',
        footerAboutText: 'Japanese Nature is a platform dedicated to bringing the beauty of four Japanese seasons into an immersive digital experience.',
        footerNavTitle: 'Navigation',
        footerContactTitle: 'Contact',
        navHome: 'Home',
        navAbout: 'About',
        navGallery: 'Gallery',
        navContact: 'Contact',
        privacyPolicy: 'Privacy Policy',
        termsOfService: 'Terms of Service',
        menuTitle: 'Navigation Menu',
        menuSeasons: 'Seasons'
    },
    jp: {
        siteTitle: 'æ—¥æœ¬ã®è‡ªç„¶',
        settingsTitle: 'è¨­å®š',
        seasonSelection: 'å­£ç¯€ã‚’é¸æŠž',
        spring: 'æ˜¥',
        summer: 'å¤',
        autumn: 'ç§‹',
        winter: 'å†¬',
        animationToggle: 'ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³',
        animationStatus: 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–',
        languageSelection: 'è¨€èªžã‚’é¸æŠž',
        welcomeTitle: 'æ—¥æœ¬ã®è‡ªç„¶ã¸ã‚ˆã†ã“ã',
        welcomeSubtitle: 'å››å­£ã®ç¾Žã—ã•',
        welcomePara1: 'æ—¥æœ¬ã¯å››å­£æŠ˜ã€…ã®è‡ªç„¶ã®ç¾Žã—ã•ã§çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚æ˜¥ã®æ¡œã®é–‹èŠ±ã‹ã‚‰å†¬ã®å„ªã—ãé™ã‚‹é›ªã¾ã§ã€å„å­£ç¯€ã¯ç‹¬ç‰¹ã®é­…åŠ›ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚',
        welcomePara2: 'ã“ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¯ã€æ—¥æœ¬ã®å„å­£ç¯€ã®é›°å›²æ°—ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã§ãã‚‹ç´ æ™´ã‚‰ã—ã„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚ç§ãŸã¡ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’é€šã—ã¦ã€æ—¥æœ¬ã®è‡ªç„¶ã®ä¼èª¬çš„ãªé™ã‘ã•ã¨èª¿å’Œã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚',
        welcomePara3: 'ä¸Šéƒ¨ã§ãŠæ°—ã«å…¥ã‚Šã®å­£ç¯€ã‚’é¸æŠžã—ã¦ã€è‡ªç„¶ãŒã©ã®ã‚ˆã†ã«ç¾Žã—ãå¤‰åŒ–ã™ã‚‹ã‹ã‚’æ„Ÿã˜ã¦ãã ã•ã„ã€‚å„å­£ç¯€ã«ã¯ã€ãƒãƒ©ãƒ³ã‚¹ã¨è‡ªç„¶ã®ç¾Žã—ã•ã¨ã„ã†æ—¥æœ¬ã®å“²å­¦ã‚’åæ˜ ã™ã‚‹ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚',
        periodLabel: 'ðŸ—“ï¸ æœŸé–“',
        characteristicsLabel: 'ðŸŒ¡ï¸ ç‰¹å¾´',
        traditionsLabel: 'ðŸŽŽ  ä¼çµ±',
        feature1Title: 'ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ä½“é¨“',
        feature1Desc: 'é¸æŠžã—ãŸå­£ç¯€ã«å¿œã˜ã¦è½ä¸‹ã™ã‚‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã§ç´ æ™´ã‚‰ã—ã„ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«åŠ¹æžœã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚æœ¬æ ¼çš„ãªæ—¥æœ¬ã®é›°å›²æ°—ã‚’ä½œã‚Šå‡ºã—ã¾ã™ã€‚',
        feature2Title: 'ãƒŸãƒ‹ãƒžãƒªã‚¹ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³',
        feature2Desc: 'æ—¥æœ¬ã®ä¾˜ã³å¯‚ã³ã®å“²å­¦ã«è§¦ç™ºã•ã‚Œã€ç§ãŸã¡ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨è‡ªç„¶ã®ç¾Žã—ã•ã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚',
        feature3Title: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°',
        feature3Desc: 'æ™‚é–“ã¨æ—¥ä»˜ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã•ã‚Œã€æ™‚é–“ã®çµŒéŽã¨å­£ç¯€ã®å¤‰åŒ–ã‚’æ€ã„å‡ºã•ã›ã¾ã™ã€‚',
        footerAboutTitle: 'ç§ãŸã¡ã«ã¤ã„ã¦',
        footerAboutText: 'Japanese Natureã¯ã€æ—¥æœ¬ã®å››å­£ã®ç¾Žã—ã•ã‚’æ²¡å…¥åž‹ã®ãƒ‡ã‚¸ã‚¿ãƒ«ä½“é¨“ã«ã‚‚ãŸã‚‰ã™ã“ã¨ã«å°‚å¿µã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚',
        footerNavTitle: 'ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³',
        footerContactTitle: 'é€£çµ¡å…ˆ',
        navHome: 'ãƒ›ãƒ¼ãƒ ',
        navAbout: 'æ¦‚è¦',
        navGallery: 'ã‚®ãƒ£ãƒ©ãƒªãƒ¼',
        navContact: 'é€£çµ¡å…ˆ',
        privacyPolicy: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼',
        termsOfService: 'åˆ©ç”¨è¦ç´„',
        menuTitle: 'ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼',
        menuSeasons: 'å­£ç¯€'
    }
};

// ===================================
// SEASON CONFIGURATION
// ===================================
const seasons = {
    spring: {
        title: { id: 'Spring Season', en: 'Spring Season', jp: 'æ˜¥ã®å­£ç¯€' },
        titleJp: { id: 'æ˜¥ (Haru)', en: 'æ˜¥ (Haru)', jp: 'æ˜¥ (ãƒãƒ«)' },
        description: {
            id: 'Musim semi membawa kehidupan baru dengan mekarnya bunga sakura yang memukau',
            en: 'Spring brings new life with the blooming of stunning cherry blossoms',
            jp: 'æ˜¥ã¯è¦‹äº‹ãªæ¡œã®é–‹èŠ±ã§æ–°ã—ã„ç”Ÿå‘½ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™'
        },
        particle: 'ðŸŒ¸',
        particleCount: 30,
        icon: 'ðŸŒ¸',
        period: { id: 'Maret - Mei', en: 'March - May', jp: '3æœˆ - 5æœˆ' },
        characteristics: {
            id: 'Udara hangat, bunga bermekaran, langit cerah',
            en: 'Warm air, blooming flowers, clear skies',
            jp: 'æš–ã‹ã„ç©ºæ°—ã€å’²ãèŠ±ã€æ™´ã‚ŒãŸç©º'
        },
        traditions: {
            id: 'Hanami (melihat bunga sakura), festival musim semi',
            en: 'Hanami (cherry blossom viewing), spring festivals',
            jp: 'èŠ±è¦‹ã€æ˜¥ç¥­ã‚Š'
        }
    },
    summer: {
        title: { id: 'Summer Season', en: 'Summer Season', jp: 'å¤ã®å­£ç¯€' },
        titleJp: { id: 'å¤ (Natsu)', en: 'å¤ (Natsu)', jp: 'å¤ (ãƒŠãƒ„)' },
        description: {
            id: 'Musim panas penuh dengan kehijauan segar dan semangat festival matsuri',
            en: 'Summer is full of fresh greenery and the spirit of matsuri festivals',
            jp: 'å¤ã¯æ–°é®®ãªç·‘ã¨ç¥­ã‚Šã®ç²¾ç¥žã«æº€ã¡ã¦ã„ã¾ã™'
        },
        particle: 'â˜˜ï¸',
        particleCount: 25,
        icon: 'â˜˜ï¸',
        period: { id: 'Juni - Agustus', en: 'June - August', jp: '6æœˆ - 8æœˆ' },
        characteristics: {
            id: 'Panas, lembab, hijau subur, langit biru',
            en: 'Hot, humid, lush green, blue skies',
            jp: 'æš‘ã„ã€æ¹¿æ°—ã€è±Šã‹ãªç·‘ã€é’ã„ç©º'
        },
        traditions: {
            id: 'Matsuri (festival musim panas), kembang api',
            en: 'Matsuri (summer festivals), fireworks',
            jp: 'ç¥­ã‚Šã€èŠ±ç«'
        }
    },
    autumn: {
        title: { id: 'Autumn Season', en: 'Autumn Season', jp: 'ç§‹ã®å­£ç¯€' },
        titleJp: { id: 'ç§‹ (Aki)', en: 'ç§‹ (Aki)', jp: 'ç§‹ (ã‚¢ã‚­)' },
        description: {
            id: 'Musim gugur mempesona dengan dedaunan maple yang berubah menjadi emas',
            en: 'Autumn is enchanting with maple leaves turning golden',
            jp: 'ç§‹ã¯é»„é‡‘è‰²ã«å¤‰ã‚ã‚‹ç´…è‘‰ã§é­…æƒ‘çš„ã§ã™'
        },
        particle: 'ðŸ',
        particleCount: 35,
        icon: 'ðŸ',
        period: { id: 'September - November', en: 'September - November', jp: '9æœˆ - 11æœˆ' },
        characteristics: {
            id: 'Sejuk, dedaunan berubah warna, udara segar',
            en: 'Cool, changing leaves, fresh air',
            jp: 'æ¶¼ã—ã„ã€ç´…è‘‰ã€æ–°é®®ãªç©ºæ°—'
        },
        traditions: {
            id: 'Momijigari (melihat daun maple), panen',
            en: 'Momijigari (maple viewing), harvest',
            jp: 'ç´…è‘‰ç‹©ã‚Šã€åŽç©«'
        }
    },
    winter: {
        title: { id: 'Winter Season', en: 'Winter Season', jp: 'å†¬ã®å­£ç¯€' },
        titleJp: { id: 'å†¬ (Fuyu)', en: 'å†¬ (Fuyu)', jp: 'å†¬ (ãƒ•ãƒ¦)' },
        description: {
            id: 'Musim dingin membawa ketenangan dengan salju yang turun lembut',
            en: 'Winter brings tranquility with gently falling snow',
            jp: 'å†¬ã¯å„ªã—ãé™ã‚‹é›ªã§é™ã‘ã•ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™'
        },
        particle: 'â„ï¸',
        particleCount: 40,
        icon: 'â„ï¸',
        period: { id: 'Desember - Februari', en: 'December - February', jp: '12æœˆ - 2æœˆ' },
        characteristics: {
            id: 'Dingin, bersalju, pemandangan putih bersih',
            en: 'Cold, snowy, pristine white scenery',
            jp: 'å¯’ã„ã€é›ªã€ãã‚Œã„ãªç™½ã„æ™¯è‰²'
        },
        traditions: {
            id: 'Onsen (pemandian air panas), perayaan tahun baru',
            en: 'Onsen (hot springs), New Year celebrations',
            jp: 'æ¸©æ³‰ã€æ–°å¹´ã®ãŠç¥ã„'
        }
    }
};

// Global Variables
let currentSeason = 'spring';
let currentLanguage = 'id';
let particleInterval;
let animationEnabled = true;

// ===================================
// INITIALIZATION
// ===================================
document.addEventListener('DOMContentLoaded', function() {
    initializeClock();
    changeSeason('spring');
    initializeFAB();
    initializeSettings();
});

// ===================================
// REAL-TIME CLOCK FUNCTIONS
// ===================================

function initializeClock() {
    updateDateTime();
    setInterval(updateDateTime, 1000);
}

function updateDateTime() {
    const now = new Date();
    
    let days, months;
    
    if (currentLanguage === 'id') {
        days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
        months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
    } else if (currentLanguage === 'en') {
        days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    } else {
        days = ['æ—¥æ›œæ—¥', 'æœˆæ›œæ—¥', 'ç«æ›œæ—¥', 'æ°´æ›œæ—¥', 'æœ¨æ›œæ—¥', 'é‡‘æ›œæ—¥', 'åœŸæ›œæ—¥'];
        months = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
    }
    
    const day = days[now.getDay()];
    const date = now.getDate();
    const month = months[now.getMonth()];
    const year = now.getFullYear();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    
    if (currentLanguage === 'jp') {
        document.getElementById('header-date').textContent = `${year}å¹´${month}${date}æ—¥ ${day}`;
    } else {
        document.getElementById('header-date').textContent = `${day}, ${date} ${month} ${year}`;
    }
    document.getElementById('header-time').textContent = `${hours}:${minutes}`;
}

// ===================================
// SEASON CHANGE FUNCTIONS
// ===================================

function changeSeason(season) {
    if (!seasons[season]) {
        console.error(`Invalid season: ${season}`);
        return;
    }
    
    currentSeason = season;
    const config = seasons[season];
    
    document.body.className = season;
    
    document.querySelectorAll('.season-icon-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.season === season) {
            btn.classList.add('active');
        }
    });
    
    // Update season info with current language
    document.getElementById('season-icon').textContent = config.icon;
    document.getElementById('season-title').textContent = `${config.title[currentLanguage]} - ${config.titleJp[currentLanguage]}`;
    document.getElementById('season-description').textContent = config.description[currentLanguage];
    document.getElementById('season-period-text').textContent = config.period[currentLanguage];
    document.getElementById('season-characteristics').textContent = config.characteristics[currentLanguage];
    document.getElementById('season-traditions').textContent = config.traditions[currentLanguage];
    
    // Update radio button in settings
    const seasonRadio = document.querySelector(`input[name="season"][value="${season}"]`);
    if (seasonRadio) seasonRadio.checked = true;
    
    if (animationEnabled) {
        createParticles(season);
    }
}

// ===================================
// PARTICLE SYSTEM FUNCTIONS
// ===================================

function createParticles(season) {
    const container = document.getElementById('particles');
    container.innerHTML = '';
    
    if (particleInterval) {
        clearInterval(particleInterval);
    }
    
    if (!animationEnabled) return;
    
    const config = seasons[season];
    
    for (let i = 0; i < config.particleCount; i++) {
        addParticle(container, config.particle);
    }
    
    particleInterval = setInterval(() => {
        if (container.children.length < config.particleCount * 2) {
            addParticle(container, config.particle);
        }
    }, 800);
}

function addParticle(container, particle) {
    const el = document.createElement('div');
    el.className = 'particle';
    el.textContent = particle;
    el.style.left = Math.random() * 100 + '%';
    el.style.fontSize = (Math.random() * 15 + 15) + 'px';
    
    const duration = Math.random() * 10 + 10;
    const delay = Math.random() * 5;
    el.style.animationDuration = duration + 's';
    el.style.animationDelay = delay + 's';
    
    container.appendChild(el);
    
    setTimeout(() => {
        if (el.parentNode) el.remove();
    }, (duration + delay) * 1000);
}

function stopParticles() {
    const container = document.getElementById('particles');
    container.innerHTML = '';
    if (particleInterval) {
        clearInterval(particleInterval);
    }
}

// ===================================
// SETTINGS FUNCTIONS
// ===================================

function initializeSettings() {
    const settingsBtn = document.getElementById('settings-btn');
    const settingsPopup = document.getElementById('settings-popup');
    const closeSettings = document.getElementById('close-settings');
    const animationToggle = document.getElementById('animation-toggle');
    
    // Open settings
    settingsBtn.addEventListener('click', () => {
        settingsPopup.classList.add('active');
    });
    
    // Close settings
    closeSettings.addEventListener('click', () => {
        settingsPopup.classList.remove('active');
    });
    
    // Close on background click
    settingsPopup.addEventListener('click', (e) => {
        if (e.target === settingsPopup) {
            settingsPopup.classList.remove('active');
        }
    });
    
    // Season selection
    document.querySelectorAll('input[name="season"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            changeSeason(e.target.value);
        });
    });
    
    // Animation toggle
    animationToggle.addEventListener('change', (e) => {
        animationEnabled = e.target.checked;
        if (animationEnabled) {
            createParticles(currentSeason);
        } else {
            stopParticles();
        }
        updateToggleLabel();
    });
    
    // Language selection
    document.querySelectorAll('input[name="language"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            changeLanguage(e.target.value);
        });
    });
}

function updateToggleLabel() {
    const label = document.querySelector('.toggle-label');
    if (animationEnabled) {
        label.textContent = translations[currentLanguage].animationStatus;
    } else {
        label.textContent = currentLanguage === 'id' ? 'Nonaktif' : 
                           currentLanguage === 'en' ? 'Inactive' : 'éžã‚¢ã‚¯ãƒ†ã‚£ãƒ–';
    }
}

// ===================================
// LANGUAGE FUNCTIONS
// ===================================

function changeLanguage(lang) {
    currentLanguage = lang;
    
    // Update all translatable elements
    document.querySelectorAll('[data-translate]').forEach(el => {
        const key = el.getAttribute('data-translate');
        if (translations[lang][key]) {
            el.textContent = translations[lang][key];
        }
    });
    
    // Update season info
    changeSeason(currentSeason);
    
    // Update date/time format
    updateDateTime();
    
    // Update toggle label
    updateToggleLabel();
    
    // Update language radio
    const langRadio = document.querySelector(`input[name="language"][value="${lang}"]`);
    if (langRadio) langRadio.checked = true;
}

// ===================================
// FLOATING ACTION BUTTON (FAB) FUNCTIONS
// ===================================

function initializeFAB() {
    const fab = document.getElementById('fab');
    const miniPage = document.getElementById('mini-page');
    const closeBtn = document.getElementById('close-menu');
    
    fab.addEventListener('click', () => {
        miniPage.classList.toggle('active');
        fab.style.transform = miniPage.classList.contains('active') ? 'rotate(45deg)' : 'rotate(0deg)';
    });
    
    closeBtn.addEventListener('click', () => {
        miniPage.classList.remove('active');
        fab.style.transform = 'rotate(0deg)';
    });
    
    document.querySelectorAll('.menu-item').forEach(item => {
        item.addEventListener('click', () => {
            miniPage.classList.remove('active');
            fab.style.transform = 'rotate(0deg)';
        });
    });
    
    document.addEventListener('click', (e) => {
        if (!miniPage.contains(e.target) && !fab.contains(e.target)) {
            miniPage.classList.remove('active');
            fab.style.transform = 'rotate(0deg)';
        }
    });
}

// ===================================
// UTILITY FUNCTIONS
// ===================================

document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
